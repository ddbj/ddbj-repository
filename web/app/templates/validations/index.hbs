{{page-title "Validations"}}

<h1 class="display-6 mb-4">Validations</h1>

<div class="mb-3">
  <LinkTo @route="validations.new" class="btn btn-primary">New Validation</LinkTo>
</div>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>DB</th>
      <th>Started</th>
      <th>Finished</th>
      <th>Progress</th>
      <th>Validity</th>
      <th>Submission</th>
    </tr>
  </thead>

  <tbody>
    {{#each @model.validations key="id" as |req|}}
      <tr>
        <td>
          <LinkTo @route="validations.show" @model={{req}}>{{req.id}}</LinkTo>
        </td>

        <td>{{req.db}}</td>
        <td>{{format-datetime req.created_at}}</td>

        <td>
          {{#if @model.finished_at}}
            {{format-datetime req.finished_at}}
          {{else}}
            -
          {{/if}}
        </td>

        <td><ProgressLabel @progress={{req.progress}} /></td>
        <td><ValidityBadge @validity={{req.validity}} /></td>

        <td>
          {{#if req.submission}}
            {{req.submission.id}}
          {{else}}
            -
          {{/if}}
        </td>
      </tr>
    {{/each}}
  </tbody>
</table>

{{#if @model.lastPage}}
  <Pagination @route="validations.index" @current={{or this.page 1}} @last={{@model.lastPage}} />
{{/if}}